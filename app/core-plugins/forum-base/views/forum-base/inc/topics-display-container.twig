{% macro new_topic_link() %}
    {% if app.isAnonymous %}
        {{ enable_html_hooks('authentication_required_msg') }}
        <div class="authentication-required-msg">
            {{ 'core-plugins.forum-base.acl.must_be_authenticated.for_new_topic'|trans({
            '%sign-in-url%': path('auth/sign-in', {'return-url': current_path() }),
            '%sign-up-url%': path('auth/sign-up', {'return-url': current_path() })
            })|raw }}
        </div>
    {% else %}
        {{ enable_html_hooks('post_new_topic_link') }}
        <a href="#"class="post-new-topic-link">
            {{ 'core-plugins.forum-base.topics-display.post-new-topic'|trans }}
        </a>
        <code>[TODO]</code>
    {% endif %}
{% endmacro %}

{% import _self as my_macros %}

{% if topics is not empty %}

    {{ my_macros.new_topic_link() }}

    {{ enable_html_hooks('topics_display', 'topic_display') }}
    <div class="topics-display-container">
        <div class="topics-display">
        <b>
            {{ nbTopicsTotal }} topics - page {{ paginationData.currentPageNum }} -
            {{ topics|length }} topics on this page
        </b>
        {% for topic in topics %}
            <div class="topic-display-container">
                <div class="topic-display">
                    <h4 class="topic-name">
                        <a href="{{ path('forum-base/topic', {topicId: topic.id}) }}"
                           class="ajax-link">
                            {{ topic.name }} - {{ topic.nb_replies }} replies
                        </a>
                    </h4>

                    <div class="topic-info">
                        Created {{ topic.created_at|from_now }} by <b>{{ topic.author.login }}</b><br>
                        Last modified {{ topic.updated_at|from_now }}
                    </div>
                </div>
            </div>
        {% endfor %}
        </div>{# end .topics-display #}
    </div>{# end .topics-display-container #}

    {{ my_macros.new_topic_link() }}

{% else %}

    {{ 'core-plugins.forum-base.topics-display.no-topic'|trans }}

    {% if app.isAnonymous %}
        {{ my_macros.new_topic_link() }}
    {% endif %}

{% endif %}